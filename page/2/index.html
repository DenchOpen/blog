<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://denchopen.github.io/blog').hostname,
    root: '/blog/',
    scheme: 'Gemini',
    version: '7.7.1',
    exturl: false,
    sidebar: {"enable":true,"position":"left","width":280,"display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Love &amp; Peace">
<meta property="og:type" content="website">
<meta property="og:title" content="个人小站">
<meta property="og:url" content="https://denchopen.github.io/blog/page/2/index.html">
<meta property="og:site_name" content="个人小站">
<meta property="og:description" content="Love &amp; Peace">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Dench">
<meta property="article:tag" content="Android">
<meta property="article:tag" content=" hexo">
<meta property="article:tag" content=" NexT">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://denchopen.github.io/blog/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>个人小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">个人小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Dench's</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/DenchOpen" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2021/06/17/Problems%E4%B8%93%E9%A2%98%E4%B9%8BViewPager2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/06/17/Problems%E4%B8%93%E9%A2%98%E4%B9%8BViewPager2/" class="post-title-link" itemprop="url">Problems专题：ViewPager2</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-17 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-17T00:00:00+08:00">2021-06-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-02 22:33:44" itemprop="dateModified" datetime="2021-07-02T22:33:44+08:00">2021-07-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ViewPager2"><a href="#ViewPager2" class="headerlink" title="ViewPager2"></a>ViewPager2</h2><h3 id="0x01-FragmentManager-is-already-executing-transactions"><a href="#0x01-FragmentManager-is-already-executing-transactions" class="headerlink" title="0x01 FragmentManager is already executing transactions"></a>0x01 FragmentManager is already executing transactions</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalStateException: FragmentManager is already executing transactions</span><br><span class="line">	at androidx.fragment.app.FragmentManager.ensureExecReady(FragmentManager.java:1778)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.execSingleAction(FragmentManager.java:1814)</span><br><span class="line">	at androidx.fragment.app.BackStackRecord.commitNow(BackStackRecord.java:297)</span><br><span class="line"></span><br><span class="line">	at androidx.viewpager2.adapter.FragmentStateAdapter.removeFragment(FragmentStateAdapter.java:464)</span><br><span class="line">	at androidx.viewpager2.adapter.FragmentStateAdapter.gcFragments(FragmentStateAdapter.java:228)</span><br><span class="line">	at androidx.viewpager2.adapter.FragmentStateAdapter.restoreState(FragmentStateAdapter.java:569)</span><br><span class="line">	at androidx.viewpager2.widget.ViewPager2.restorePendingState(ViewPager2.java:350)</span><br><span class="line">	at androidx.viewpager2.widget.ViewPager2.dispatchRestoreInstanceState(ViewPager2.java:375)</span><br><span class="line"></span><br><span class="line">	at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3829)</span><br><span class="line">	at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3829)</span><br><span class="line">	at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3829)</span><br><span class="line">	at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3829)</span><br><span class="line">	at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3829)</span><br><span class="line"></span><br><span class="line">	at android.view.View.restoreHierarchyState(View.java:18613)</span><br><span class="line"></span><br><span class="line">	at androidx.fragment.app.Fragment.restoreViewState(Fragment.java:573)</span><br><span class="line">	at androidx.fragment.app.FragmentStateManager.restoreViewState(FragmentStateManager.java:356)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1189)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1356)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.moveFragmentToExpectedState(FragmentManager.java:1434)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1497)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.dispatchStateChange(FragmentManager.java:2625)</span><br><span class="line">	at androidx.fragment.app.FragmentManager.dispatchActivityCreated(FragmentManager.java:2577)</span><br><span class="line"></span><br><span class="line">	at androidx.fragment.app.FragmentController.dispatchActivityCreated(FragmentController.java:247)</span><br><span class="line"></span><br><span class="line">	at androidx.fragment.app.FragmentActivity.onStart(FragmentActivity.java:541)</span><br><span class="line">	at androidx.appcompat.app.AppCompatActivity.onStart(AppCompatActivity.java:210)</span><br><span class="line">	at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1392)</span><br><span class="line">	at android.app.Activity.performStart(Activity.java:7260)</span><br><span class="line">	at android.app.ActivityThread.handleStartActivity(ActivityThread.java:3009)</span><br><span class="line"></span><br><span class="line">	at android.app.servertransaction.TransactionExecutor.performLifecycleSequence(TransactionExecutor.java:180)</span><br><span class="line">	at android.app.servertransaction.TransactionExecutor.cycleToPath(TransactionExecutor.java:165)</span><br><span class="line">	at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:142)</span><br><span class="line">	at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:70)</span><br><span class="line">	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1840)</span><br><span class="line">	at android.os.Handler.dispatchMessage(Handler.java:106)</span><br><span class="line">	at android.os.Looper.loop(Looper.java:207)</span><br><span class="line">	at android.app.ActivityThread.main(ActivityThread.java:6878)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Native Method)</span><br><span class="line">	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)</span><br><span class="line">	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:876)</span><br></pre></td></tr></table></figure>

<p><strong>解决方案</strong></p>
<p>如果在 Fragment 中使用 ViewPager2，那么 FragmentStateAdapter 应该使用 childFragmentManager。将</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FragmentStateAdapter viewPagerAdapter = <span class="keyword">new</span> FragmentStateAdapter(getActivity().getSupportFragmentManager(), titles);</span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FragmentStateAdapter viewPagerAdapter = <span class="keyword">new</span> FragmentStateAdapter(getChildFragmentManager(), titles);</span><br></pre></td></tr></table></figure>



<h3 id="0x02-ViewPager2-FragmentStateAdapter的notifyDataSetChanged方法失效"><a href="#0x02-ViewPager2-FragmentStateAdapter的notifyDataSetChanged方法失效" class="headerlink" title="0x02 ViewPager2+FragmentStateAdapter的notifyDataSetChanged方法失效"></a>0x02 ViewPager2+FragmentStateAdapter的notifyDataSetChanged方法失效</h3><p><strong>原因分析</strong>：</p>
<p>因为 FragmentStateAdapter 会保存所有Fragment实例，当调用 <code>Adapter.notifyDataSetChanged()</code> 方法时，Fragment 并没有走 <code>onCreate</code> 方法。</p>
<p><strong>解决方案：</strong></p>
<p>方案一 </p>
<p>在调用 <code>notifyDataSetChanged</code> 之前，清空 FragmentStateAdapter 的 Fragment 列表。</p>
<p>方案二</p>
<p>重写 <code>getItemId()</code> <code>containsItem()</code> 这两个方法，并确保 <code>getItemId()</code> 的值是唯一的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VideoPagerAdapter</span>(</span></span><br><span class="line">       fragment: Fragment</span><br><span class="line">   ) : FragmentStateAdapter(fragment) &#123;</span><br><span class="line">       <span class="keyword">private</span> val itemIds = mutableMapOf&lt;Long, Fragment&gt;()</span><br><span class="line">       <span class="keyword">private</span> val data: MutableList&lt;T&gt; = mutableListOf()</span><br><span class="line">       <span class="keyword">private</span> val fragmentManager = fragment.childFragmentManager</span><br><span class="line"></span><br><span class="line">       <span class="function">fun <span class="title">addData</span><span class="params">(list: List&lt;T&gt;, isRefresh: Boolean)</span> </span>&#123;</span><br><span class="line">           Log.d(<span class="string">"xxx"</span>, <span class="string">"addData: list=$list, isRefresh=$isRefresh"</span>)</span><br><span class="line">           <span class="keyword">if</span> (isRefresh) &#123;</span><br><span class="line">               clean()</span><br><span class="line">               data.addAll(list)</span><br><span class="line">               notifyDataSetChanged()</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               val size = data.size</span><br><span class="line">               data.addAll(list)</span><br><span class="line">               notifyItemRangeInserted(size, list.size)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function">override fun <span class="title">getItemCount</span><span class="params">()</span>: Int </span>= data.size</span><br><span class="line"></span><br><span class="line">       <span class="function">override fun <span class="title">createFragment</span><span class="params">(position: Int)</span>: Fragment </span>&#123;</span><br><span class="line">           Log.d(<span class="string">"xxx"</span>, <span class="string">"createFragment: position=$position"</span>)</span><br><span class="line">           val itemId = getItemId(position)</span><br><span class="line">           <span class="keyword">if</span> (!itemIds.containsKey(itemId) || itemIds[itemId] !is KuaikanVideoFragment) &#123;</span><br><span class="line">               val fragment = createFragment()</span><br><span class="line">               itemIds[itemId] = fragment</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> itemIds[itemId] ?: Fragment()</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function">override fun <span class="title">getItemId</span><span class="params">(position: Int)</span>: Long </span>&#123;</span><br><span class="line">           Log.d(<span class="string">"xxx"</span>, <span class="string">"getItemId: position=$position"</span>)</span><br><span class="line">           val id = data[position].id.toLong()</span><br><span class="line">           <span class="keyword">if</span> (id == <span class="number">0L</span> || position &lt; <span class="number">0</span> || position &gt;= data.size) &#123;</span><br><span class="line">               <span class="keyword">return</span> RecyclerView.NO_ID</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> id.shl(<span class="number">10</span>) + position</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function">override fun <span class="title">containsItem</span><span class="params">(itemId: Long)</span>: Boolean </span>&#123;</span><br><span class="line">           Log.d(<span class="string">"xxx"</span>, <span class="string">"containsItem: itemId=$itemId"</span>)</span><br><span class="line">           <span class="keyword">return</span> itemIds.contains(itemId)</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function">fun <span class="title">getItemData</span><span class="params">(position: Int)</span>: ShortVideoBean? </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">if</span> (data.size &lt;= position) <span class="keyword">null</span> <span class="keyword">else</span> data[position]</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">private</span> fun <span class="title">clean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           Log.d(<span class="string">"xxx"</span>, <span class="string">"clean"</span>)</span><br><span class="line">           val ft = fragmentManager.beginTransaction()</span><br><span class="line">           <span class="keyword">for</span> ((_, value) in itemIds) &#123;</span><br><span class="line">               ft.remove(value)</span><br><span class="line">           &#125;</span><br><span class="line">           ft.commitNowAllowingStateLoss()</span><br><span class="line">           itemIds.clear()</span><br><span class="line">           data.clear()</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


<h3 id="0x03-Design-assumption-violated"><a href="#0x03-Design-assumption-violated" class="headerlink" title="0x03 Design assumption violated"></a>0x03 Design assumption violated</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalStateException: Design assumption violated.</span><br><span class="line">    at androidx.viewpager2.widget.ViewPager2.updateCurrentItem(ViewPager2.java:538)</span><br><span class="line">    at androidx.viewpager2.widget.ViewPager2$4.onAnimationsFinished(ViewPager2.java:518)</span><br><span class="line">    at androidx.recyclerview.widget.RecyclerView$ItemAnimator.isRunning(RecyclerView.java:13244)</span><br><span class="line">    at androidx.viewpager2.widget.ViewPager2.onLayout(ViewPager2.java:515)</span><br><span class="line">    at android.view.View.layout(View.java:15596)</span><br></pre></td></tr></table></figure>

<p><strong>解决方案：</strong></p>
<p>1 升级 viewpager2</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'androidx.viewpager2:viewpager2:1.0.0-beta03'</span></span><br></pre></td></tr></table></figure>

<p>2 检查是否重写了 <code>getItemId()</code> <code>containsItem()</code> 这两个方法，<strong>确保 <code>getItemId()</code> 的值是唯一的</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2021/06/17/RecyclerView%E7%9A%84%E5%87%A0%E7%A7%8DDecoration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/06/17/RecyclerView%E7%9A%84%E5%87%A0%E7%A7%8DDecoration/" class="post-title-link" itemprop="url">RecyclerView的几种Decoration</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-06-17 00:00:00 / 修改时间：22:46:43" itemprop="dateCreated datePublished" datetime="2021-06-17T00:00:00+08:00">2021-06-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="RecyclerView的几种Decoration"><a href="#RecyclerView的几种Decoration" class="headerlink" title="RecyclerView的几种Decoration"></a>RecyclerView的几种Decoration</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.res.Resources</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect</span><br><span class="line"><span class="keyword">import</span> android.util.TypedValue</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimplePaddingDecoration</span></span>(</span><br><span class="line">    spaceDp: <span class="built_in">Int</span>,</span><br><span class="line">    <span class="keyword">val</span> orientation: <span class="built_in">Int</span> = RecyclerView.VERTICAL</span><br><span class="line">) : RecyclerView.ItemDecoration() &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> dividerHeight: <span class="built_in">Int</span> = TypedValue.applyDimension(</span><br><span class="line">        TypedValue.COMPLEX_UNIT_DIP,</span><br><span class="line">        spaceDp.toFloat(),</span><br><span class="line">        Resources.getSystem().displayMetrics</span><br><span class="line">    ).toInt()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemOffsets</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        outRect: <span class="type">Rect</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        view: <span class="type">View</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        parent: <span class="type">RecyclerView</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        state: <span class="type">RecyclerView</span>.<span class="type">State</span></span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> position = (view.layoutParams <span class="keyword">as</span> RecyclerView.LayoutParams).viewLayoutPosition</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (orientation == RecyclerView.VERTICAL) &#123;</span><br><span class="line">            <span class="comment">// 竖直</span></span><br><span class="line">            <span class="keyword">if</span> (position + <span class="number">1</span> != parent.adapter?.itemCount) &#123;</span><br><span class="line">                outRect.<span class="keyword">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, dividerHeight)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                outRect.<span class="keyword">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 水平</span></span><br><span class="line">            <span class="keyword">if</span> (position + <span class="number">1</span> != parent.adapter?.itemCount) &#123;</span><br><span class="line">                outRect.<span class="keyword">set</span>(<span class="number">0</span>, <span class="number">0</span>, dividerHeight, <span class="number">0</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                outRect.<span class="keyword">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2021/06/17/PowerShell%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/06/17/PowerShell%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">PowerShell最佳实践</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-06-17 00:00:00 / 修改时间：22:46:01" itemprop="dateCreated datePublished" datetime="2021-06-17T00:00:00+08:00">2021-06-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="PowerShell最佳实践"><a href="#PowerShell最佳实践" class="headerlink" title="PowerShell最佳实践"></a>PowerShell最佳实践</h2><p>Windows 10 系统自带 PowerShell，美化教程</p>
<h3 id="0x01-安装Fluent-Terminal"><a href="#0x01-安装Fluent-Terminal" class="headerlink" title="0x01 安装Fluent Terminal"></a>0x01 安装Fluent Terminal</h3><p>在Windows 应用商店安装，或者Github</p>
<h3 id="0x02-安装powershell模块"><a href="#0x02-安装powershell模块" class="headerlink" title="0x02 安装powershell模块"></a>0x02 安装powershell模块</h3><p>1、安装posh-git、oh-my-posh和Get-ChildItemColor(美化ls命令)：</p>
<p>在powershell管理员模式下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> Install-Module posh-git -Scope CurrentUser</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> Install-Module oh-my-posh -Scope CurrentUser</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> Install-Module DirColors</span></span><br></pre></td></tr></table></figure>

<p>2、设置修改powershell的配置文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">if</span> (!(Test-Path -Path <span class="variable">$PROFILE</span> )) &#123; New-Item -Type File -Path <span class="variable">$PROFILE</span> -Force &#125;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> notepad <span class="variable">$PROFILE</span></span></span><br></pre></td></tr></table></figure>

<p>输入内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Import-Module DirColors</span><br><span class="line">Import-Module posh-git</span><br><span class="line">Import-Module oh-my-posh</span><br><span class="line">Set-PoshPrompt -Theme PowerLine</span><br></pre></td></tr></table></figure>

<p>其中主题名可以在下面的路径里找到,可以自行切换主题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\WindowsPowerShell\Modules\oh-my-posh\3.163.0\themes</span><br></pre></td></tr></table></figure>

<h3 id="0x03-安装Powerline字体"><a href="#0x03-安装Powerline字体" class="headerlink" title="0x03 安装Powerline字体"></a>0x03 安装Powerline字体</h3><p>在Fluent Terminal设置 powerline 字体和字体大小。</p>
<h3 id="0x04-文件管理器命令"><a href="#0x04-文件管理器命令" class="headerlink" title="0x04 文件管理器命令"></a>0x04 文件管理器命令</h3><p>在文件夹中打开：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> I 在文件夹中打开</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> explorer (gl)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> II 在文件夹中打开</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> start .</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> III 在文件夹中打开</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ii .</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 打开当前根目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ii /</span></span><br></pre></td></tr></table></figure>

<p>在当前文件夹打开PowerShell：</p>
<p>空白处 Shift + 鼠标右键，在弹出的菜单中选择PowerShell.</p>
<h3 id="0x05-VS-Code-命令"><a href="#0x05-VS-Code-命令" class="headerlink" title="0x05 VS Code 命令"></a>0x05 VS Code 命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> code .</span></span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2021/05/30/%E5%93%B2%E5%AD%A6%E5%90%AF%E8%92%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/05/30/%E5%93%B2%E5%AD%A6%E5%90%AF%E8%92%99/" class="post-title-link" itemprop="url">哲学启蒙</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-30 12:39:32 / 修改时间：16:27:23" itemprop="dateCreated datePublished" datetime="2021-05-30T12:39:32+08:00">2021-05-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>人们的烦恼，基本是源于读书太少，而想得太多。</strong></p>
<p>读哲学，不只是去吸收大家们的思想，而是在读的同时不要忘记思考。</p>
<p>哲学也许给不了人成功，也不一定会带来富有，但至少获得了自由。</p>
<h3 id="大问题"><a href="#大问题" class="headerlink" title="大问题"></a>大问题</h3><p>作者: [美国] 罗伯特·C. 所罗门</p>
<h3 id="哲学的故事"><a href="#哲学的故事" class="headerlink" title="哲学的故事"></a>哲学的故事</h3><p>作者：威尔·杜兰特</p>
<blockquote>
<p>用讲故事的方法，介绍了主要哲学家的生平及其观点，从苏格拉底、柏拉图、亚里士多德到叔本华、尼采再到柏格森，罗素、杜威等。在阐述每位哲学家思想的同时，生动地介绍了他们生活的时代背景、生活境遇和情感经历。</p>
</blockquote>
<h3 id="苏菲的世界"><a href="#苏菲的世界" class="headerlink" title="苏菲的世界"></a>苏菲的世界</h3><p>作者：乔斯坦·贾德</p>
<blockquote>
<p>14岁的少女苏菲不断接到一些极不寻常的来信，世界像谜团一般在她眼底展开，她在一位神秘导师的指引下，运用少女天生的悟性与后天知识，企图解开这些谜团，然而。事实真相远比她所想的更怪异、更离奇……</p>
</blockquote>
<h3 id="西方哲学简史"><a href="#西方哲学简史" class="headerlink" title="西方哲学简史"></a>西方哲学简史</h3><p>作者：伯特兰·罗素</p>
<blockquote>
<p>记述了从西方哲学萌芽的古希腊哲学一直到二十世纪早期期西方哲学的发展历程。</p>
<p>《西方哲学简史》是在罗素的代表作《西方哲学史》的基础上，保留原著架构，并对一些繁复的逻辑论证进行通俗化的基础上编译而成，使其更加适合普通读者阅读。</p>
</blockquote>
<h3 id="禅与摩托车维修艺术"><a href="#禅与摩托车维修艺术" class="headerlink" title="禅与摩托车维修艺术"></a>禅与摩托车维修艺术</h3><p>作者：罗伯特·M.波西格</p>
<blockquote>
<p>1968年，他与长子克里斯一起骑着摩托车从双子城出发，在中西部旷野、落基山区和西海岸从事心灵探险。他之所以开始这场横跨美国大陆的万里长旅，是希望从狭窄而受限的自我解脱。一路经过复杂经验与反省思考，他终于找到生理上的、精神上的完整与清净。</p>
</blockquote>
<p>霍金高评：</p>
<h3 id="时间简史"><a href="#时间简史" class="headerlink" title="时间简史"></a>时间简史</h3><p>霍金</p>
<h3 id="你的第一本哲学书"><a href="#你的第一本哲学书" class="headerlink" title="你的第一本哲学书"></a>你的第一本哲学书</h3><p>作者：托马斯·内格尔</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2021/05/27/Terminal%E5%92%8CAndroidStudio%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/05/27/Terminal%E5%92%8CAndroidStudio%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">Terminal设置代理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-27 02:40:48" itemprop="dateCreated datePublished" datetime="2021-05-27T02:40:48+08:00">2021-05-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-02 23:53:14" itemprop="dateModified" datetime="2021-06-02T23:53:14+08:00">2021-06-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="0x01-Terminal代理设置"><a href="#0x01-Terminal代理设置" class="headerlink" title="0x01 Terminal代理设置"></a>0x01 Terminal代理设置</h3><p>给 mac 的 terminal 设置代理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~&#x2F;.zshrc</span><br><span class="line"># proxy</span><br><span class="line">export http_proxy&#x3D;http:&#x2F;&#x2F;127.0.0.1:8001</span><br><span class="line">export https_proxy&#x3D;$http_proxy</span><br><span class="line">$ source ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>



<h3 id="0x02-AndroidStudio代理设置"><a href="#0x02-AndroidStudio代理设置" class="headerlink" title="0x02 AndroidStudio代理设置"></a>0x02 AndroidStudio代理设置</h3><p>Android Studio 的代理设置</p>
<p><code>Perference --&gt;  Appearance &amp; Behavior --&gt; System Settings --&gt; Http Proxy</code></p>
<p>SOCKS代理<br>通常可以下载SDK，但是gradle同步时，经常出现卡死或是失败的情况，则需要在工程目录下的<code>gradle.properties</code>进行以下相关配置</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=-DsocksProxyHost=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -DsocksProxyPort=<span class="number">1080</span> </span><br><span class="line">systemProp.socks.proxyHost=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> </span><br><span class="line">systemProp.socks.proxyPort=<span class="number">1080</span></span><br></pre></td></tr></table></figure>

<p>HTTP代理<br>当然也可以在工程目录下的<code>gradle.properties</code>进行相关配置</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemProp.https.proxyPort=<span class="number">1080</span> </span><br><span class="line">systemProp.http.proxyHost=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> </span><br><span class="line">systemProp.https.proxyHost=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> </span><br><span class="line">systemProp.http.proxyPort=<span class="number">1080</span></span><br></pre></td></tr></table></figure>

<p>对于整个项目的 HTTP 代理设置，请在 <code>gradle/gradle.properties</code> 文件中设置代理设置</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Project-wide Gradle settings.</span><br><span class="line">...</span><br><span class="line">systemProp.http.proxyHost=proxy.company.com</span><br><span class="line">systemProp.http.proxyPort=<span class="number">443</span></span><br><span class="line">systemProp.http.proxyUser=username</span><br><span class="line">systemProp.http.proxyPassword=password</span><br><span class="line">systemProp.http.auth.ntlm.domain=domain</span><br><span class="line"></span><br><span class="line">systemProp.https.proxyHost=proxy.company.com</span><br><span class="line">systemProp.https.proxyPort=<span class="number">443</span></span><br><span class="line">systemProp.https.proxyUser=username</span><br><span class="line">systemProp.https.proxyPassword=password</span><br><span class="line">systemProp.https.auth.ntlm.domain=domain</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2021/05/24/VolumeDialog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/05/24/VolumeDialog/" class="post-title-link" itemprop="url">VolumeDialog音量控制自定义</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-24 23:38:52" itemprop="dateCreated datePublished" datetime="2021-05-24T23:38:52+08:00">2021-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-13 22:25:17" itemprop="dateModified" datetime="2021-07-13T22:25:17+08:00">2021-07-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="VolumeDialog音量控制自定义"><a href="#VolumeDialog音量控制自定义" class="headerlink" title="VolumeDialog音量控制自定义"></a>VolumeDialog音量控制自定义</h3><p>1 使用自定义 AlertDialog 实现</p>
<p>2 <code>window?.setFlags</code> 设置 dialog 的样式</p>
<p>3 <code>window?.attributes</code> 设置 dialog 的位置</p>
<p>4 返回键监听，兼容机型需要使用 setOnKeyListener</p>
<p>5 按一次音量键回调多次的问题，<code>KeyEvent.action</code> 事件分 KeyEvent.ACTION_UP 和 KeyEvent.ACTION_DOWN</p>
<p>6 音量加减需要获取系统音量 max 值来手动控制，不同手机 max 值域不同</p>
<p>示例代码如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.res.Resources</span><br><span class="line"><span class="keyword">import</span> android.media.AudioManager</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.os.Handler</span><br><span class="line"><span class="keyword">import</span> android.os.Looper</span><br><span class="line"><span class="keyword">import</span> android.util.Log</span><br><span class="line"><span class="keyword">import</span> android.util.TypedValue</span><br><span class="line"><span class="keyword">import</span> android.view.Gravity</span><br><span class="line"><span class="keyword">import</span> android.view.KeyEvent</span><br><span class="line"><span class="keyword">import</span> android.view.WindowManager</span><br><span class="line"><span class="keyword">import</span> android.widget.ProgressBar</span><br><span class="line"><span class="keyword">import</span> com.rrtv.ui.R</span><br><span class="line"><span class="keyword">import</span> com.rrtv.ui.widget.VolumeProgressView</span><br><span class="line"><span class="keyword">import</span> java.lang.ref.WeakReference</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 声音调整控件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VolumeDialog</span></span>(activity: Activity) :</span><br><span class="line">    androidx.appcompat.app.AlertDialog(activity, R.style.VolumeDialog) &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">val</span> TAG = <span class="string">"VolumeDialog"</span></span><br><span class="line"></span><br><span class="line">        <span class="meta">@JvmStatic</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">show</span><span class="params">(activity: <span class="type">Activity</span>)</span></span> &#123;</span><br><span class="line">            activity.let &#123;</span><br><span class="line">                <span class="keyword">if</span> (activity.isFinishing) <span class="keyword">return</span></span><br><span class="line">                VolumeDialog(activity).show()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> volumeAudioManager = context.getSystemService(Context.AUDIO_SERVICE) <span class="keyword">as</span> AudioManager</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> volume = volumeAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> maxVolume = volumeAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> step = (maxVolume / <span class="number">10</span>).coerceAtLeast(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> delayMillis = <span class="number">1500L</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> weakReference = WeakReference(activity)</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.dialog_volume_progress)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//实现Dialog区域外部事件可以传给Activity</span></span><br><span class="line">        <span class="comment">// FLAG_NOT_TOUCH_MODAL作用：即使该window可获得焦点情况下，仍把该window之外的任何event发送到该window之后的其他window</span></span><br><span class="line">        window?.setFlags(</span><br><span class="line">            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,</span><br><span class="line">            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// FLAG_WATCH_OUTSIDE_TOUCH作用：如果点击事件发生在window之外，就会收到一个特殊的MotionEvent，为ACTION_OUTSIDE</span></span><br><span class="line">        window?.setFlags(</span><br><span class="line">            WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,</span><br><span class="line">            WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 顶部显示</span></span><br><span class="line"><span class="comment">//        window?.setGravity(Gravity.TOP)</span></span><br><span class="line">        <span class="keyword">val</span> attrs = window?.attributes</span><br><span class="line">        attrs?.apply &#123;</span><br><span class="line">            gravity = Gravity.TOP</span><br><span class="line">            height = WindowManager.LayoutParams.WRAP_CONTENT</span><br><span class="line">            width = WindowManager.LayoutParams.MATCH_PARENT</span><br><span class="line">            y = TypedValue.applyDimension(</span><br><span class="line">                TypedValue.COMPLEX_UNIT_DIP,</span><br><span class="line">                <span class="number">35f</span>,</span><br><span class="line">                Resources.getSystem().displayMetrics</span><br><span class="line">            ).toInt()</span><br><span class="line">        &#125;</span><br><span class="line">        Log.d(TAG, <span class="string">"onCreate() called with: attrs = <span class="variable">$attrs</span>"</span>)</span><br><span class="line">        window?.attributes = attrs</span><br><span class="line">        <span class="comment">// 按空白处不能取消</span></span><br><span class="line">        setCanceledOnTouchOutside(<span class="literal">false</span>)</span><br><span class="line">        <span class="comment">// 初始化界面控件</span></span><br><span class="line">        initView()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> volumeProgressView: VolumeProgressView? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> progressBar: ProgressBar? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> _handler = Handler(Looper.getMainLooper())</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> r = Runnable &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dismiss()</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e: Exception) &#123;</span><br><span class="line">            <span class="comment">// sometimes happens windows token error.</span></span><br><span class="line">            e.printStackTrace()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">dismiss</span><span class="params">()</span></span> &#123;</span><br><span class="line">        _handler.removeCallbacks(r)</span><br><span class="line">        <span class="keyword">super</span>.dismiss()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        Log.d(TAG, <span class="string">"initView: "</span>)</span><br><span class="line">        volumeProgressView = findViewById(R.id.vpv_volume)</span><br><span class="line">        progressBar = findViewById(R.id.pb_volume)</span><br><span class="line"></span><br><span class="line">        refreshProgress(volume * <span class="number">1f</span> / maxVolume)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 解决不同机型版本兼容问题，onKeyDown 可能被拦截</span></span><br><span class="line">        setOnKeyListener &#123; _, keyCode, event -&gt;</span><br><span class="line">            Log.d(TAG, <span class="string">"setOnKeyListener: keyCode = <span class="variable">$keyCode</span>, event = <span class="variable">$event</span>"</span>)</span><br><span class="line">            <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_VOLUME_UP || keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) &#123;</span><br><span class="line">                handleKeyEvent(keyCode, event)</span><br><span class="line">                <span class="literal">true</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">super</span>.onKeyDown(keyCode, event)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">refreshProgress</span><span class="params">(volumePercent: <span class="type">Float</span>)</span></span> &#123;</span><br><span class="line">        _handler.removeCallbacks(r)</span><br><span class="line">        volumeProgressView?.setProgress(volumePercent)</span><br><span class="line">        progressBar?.progress = (volumePercent * <span class="number">1000</span>).toInt()</span><br><span class="line">        _handler.postDelayed(r, delayMillis)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">handleKeyEvent</span><span class="params">(keyCode: <span class="type">Int</span>, event: <span class="type">KeyEvent</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        Log.d(TAG, <span class="string">"handleKeyEvent: volume = <span class="variable">$volume</span>, maxVolume = <span class="variable">$maxVolume</span>, step = <span class="variable">$step</span>"</span>)</span><br><span class="line">        <span class="keyword">if</span> ((keyCode != KeyEvent.KEYCODE_VOLUME_UP &amp;&amp; keyCode != KeyEvent.KEYCODE_VOLUME_DOWN) || event.action != KeyEvent.ACTION_UP) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        volume = <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_VOLUME_UP) &#123; <span class="comment">// up</span></span><br><span class="line">            <span class="keyword">if</span> (volume == maxVolume) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            maxVolume.coerceAtMost(volume + step)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// down</span></span><br><span class="line">            <span class="keyword">if</span> (volume == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            <span class="number">0</span>.coerceAtLeast(volume - step)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> volumePercent = volume * <span class="number">1f</span> / maxVolume</span><br><span class="line">        refreshProgress(volumePercent)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 变更声音</span></span><br><span class="line">        volumeAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, volume, <span class="number">0</span>)</span><br><span class="line">        Log.d(TAG, <span class="string">"handleKeyEvent: AudioManager set volume = <span class="variable">$volume</span> done."</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回事件，仅拦截音量控制事件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onKeyDown</span><span class="params">(keyCode: <span class="type">Int</span>, event: <span class="type">KeyEvent</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        Log.d(TAG, <span class="string">"onKeyDown() called with: keyCode = <span class="variable">$keyCode</span>, event = <span class="variable">$event</span>"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_VOLUME_UP || keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) &#123;</span><br><span class="line">            handleKeyEvent(keyCode, event)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.onKeyDown(keyCode, event)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/blog/">1</a><span class="page-number current">2</span><a class="page-number" href="/blog/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/8/">8</a><a class="extend next" rel="next" href="/blog/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dench"
      src="/blog/images/avatar.png">
  <p class="site-author-name" itemprop="name">Dench</p>
  <div class="site-description" itemprop="description">Love & Peace</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DenchOpen</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/blog/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
