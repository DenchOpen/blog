<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://denchopen.github.io/blog').hostname,
    root: '/blog/',
    scheme: 'Gemini',
    version: '7.7.1',
    exturl: false,
    sidebar: {"enable":true,"position":"left","width":280,"display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Love &amp; Peace">
<meta property="og:type" content="website">
<meta property="og:title" content="个人小站">
<meta property="og:url" content="https://denchopen.github.io/blog/page/2/index.html">
<meta property="og:site_name" content="个人小站">
<meta property="og:description" content="Love &amp; Peace">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Dench">
<meta property="article:tag" content="Android">
<meta property="article:tag" content=" hexo">
<meta property="article:tag" content=" NexT">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://denchopen.github.io/blog/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>个人小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">个人小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Dench's</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/DenchOpen" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2022/10/12/%E7%AE%97%E6%B3%95-%E9%93%BE%E8%A1%A8Java%E7%89%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/10/12/%E7%AE%97%E6%B3%95-%E9%93%BE%E8%A1%A8Java%E7%89%88/" class="post-title-link" itemprop="url">链表(Java版)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-12 01:09:31" itemprop="dateCreated datePublished" datetime="2022-10-12T01:09:31+08:00">2022-10-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-26 18:11:50" itemprop="dateModified" datetime="2022-11-26T18:11:50+08:00">2022-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="链表-Java版"><a href="#链表-Java版" class="headerlink" title="链表(Java版)"></a>链表(Java版)</h2><p>在链表操作中，我们通常通过生成一个 dummy 哑节点，来避免空链表的判断。</p>
<h3 id="19-删除链表的倒数第-N-个结点"><a href="#19-删除链表的倒数第-N-个结点" class="headerlink" title="19.删除链表的倒数第 N 个结点"></a>19.删除链表的倒数第 N 个结点</h3><p>方法一：计算链表长度</p>
<p>为了方便删除操作，我们可以从哑节点开始遍历 L−n+1 个节点。当遍历到第 L−n+1 个节点时，它的下一个节点就是我们需要删除的节点，这样我们只需要修改一次指针，就能完成删除操作。</p>
<p>方法三：双指针</p>
<p>我们可以使用两个指针 first 和 second 同时对链表进行遍历，并且 first 比 second 超前 n 个节点。当 first 遍历到链表的末尾时，second 就恰好处于倒数第 n 个节点。</p>
<p>时间复杂度：O(L)，其中 L 是链表的长度。<br>空间复杂度：O(1)。</p>
<h3 id="21-合并两个有序链表"><a href="#21-合并两个有序链表" class="headerlink" title="21.合并两个有序链表"></a>21.合并两个有序链表</h3><ol>
<li>当 l1 和 l2 都不是空链表时，判断 l1 和 l2 哪一个链表的头节点的值更小，将较小值的节点添加到结果里。</li>
<li>当 l1 和 l2 有一个是空的,只需要简单地将非空链表接在合并链表的后面。</li>
</ol>
<h3 id="23-合并K个升序链表"><a href="#23-合并K个升序链表" class="headerlink" title="23.合并K个升序链表"></a>23.合并K个升序链表</h3><p>方法一：顺序合并</p>
<p>已经有合并两个有序链表的前提，直接遍历数组，依次合并两个链表得到结果。</p>
<p>方法二：分治合并</p>
<p>将 k 个链表分组并将同一组中的链表合并（递归实现）</p>
<p>进时间复杂度为 <code>O(kn×logk)</code><br>空间复杂度,递归会使用到 <code>O(logk)</code> 空间代价的栈空间</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2022/10/10/Android%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7@2022/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/10/10/Android%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7@2022/" class="post-title-link" itemprop="url">Android动态权限申请</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-10 01:08:08" itemprop="dateCreated datePublished" datetime="2022-10-10T01:08:08+08:00">2022-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-26 18:11:50" itemprop="dateModified" datetime="2022-11-26T18:11:50+08:00">2022-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Android动态权限申请"><a href="#Android动态权限申请" class="headerlink" title="Android动态权限申请"></a>Android动态权限申请</h1><h4 id="0x01-介绍"><a href="#0x01-介绍" class="headerlink" title="0x01 介绍"></a>0x01 介绍</h4><p>由于 Android 动态权限申请是一个交互比较复杂的模块，整个申请的流程也比较长，所以，写了一个工具来封装了一个，也具体的实现了一个流程。</p>
<p>由于每个App的Ui风格不一致，所以没有把Toast和弹框封装进工具，等后期有好的想法再优化。</p>
<h4 id="0x02-动态权限申请流程"><a href="#0x02-动态权限申请流程" class="headerlink" title="0x02 动态权限申请流程"></a>0x02 动态权限申请流程</h4><ol>
<li>检查授权状态</li>
<li>申请权限</li>
<li>处理权限申请结果</li>
<li>当用户‘拒绝且不再询问’，引导去手机设置</li>
<li>检查手机设置后的权限申请结果</li>
</ol>
<h4 id="0x03-使用说明"><a href="#0x03-使用说明" class="headerlink" title="0x03 使用说明"></a>0x03 使用说明</h4><p>主要封装类 <code>PermissionManager</code></p>
<p>根据业务需要用到安卓定义的高危权限，需要去动态申请权权限。通常是在Activity 和 Fragment 组件中发起。</p>
<p>1 检查权限授权状态</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (PermissionManager.hasPermissions(<span class="keyword">this</span>, Manifest.permission.READ_PHONE_STATE)) &#123;</span><br><span class="line">    <span class="comment">// after permission</span></span><br><span class="line">    afterPermission()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    showRequestPermissionDialog(<span class="string">"申请手机权限的原因是因为我需要"</span>, Manifest.permission.READ_PHONE_STATE)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2 申请权限，根据合规化通常需要先弹框</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">showRequestPermissionDialog</span><span class="params">(message: <span class="type">String</span>, <span class="keyword">vararg</span> perm: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    AlertDialog.Builder(<span class="keyword">this</span>)</span><br><span class="line">        .setTitle(<span class="string">"权限申请"</span>)</span><br><span class="line">        .setMessage(message)</span><br><span class="line">        .setPositiveButton(<span class="string">"去授权"</span>) &#123; dialog, which -&gt;</span><br><span class="line">            dialog.dismiss()</span><br><span class="line">            PermissionManager.requestPermissions(<span class="keyword">this</span>, *perm)</span><br><span class="line">        &#125;</span><br><span class="line">        .setNegativeButton(<span class="string">"取消"</span>) &#123; dialog, which -&gt;</span><br><span class="line">            dialog.dismiss()</span><br><span class="line">            ToastUtil.showToast(<span class="keyword">this</span>, <span class="string">"已取消授权..."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .setCancelable(<span class="literal">false</span>)</span><br><span class="line">        .create()</span><br><span class="line">        .show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3 处理权限申请结果</p>
<p>在 <code>onRequestPermissionsResult</code> 回调接口中，调用 <code>PermissionManager.onRequestPermissionsResult</code> 方法，并且实现 <code>PermissionManager.OnPermissionResultCallback</code> 这个回调接口。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRequestPermissionsResult</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    requestCode: <span class="type">Int</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    permissions: <span class="type">Array</span>&lt;<span class="type">out</span> <span class="type">String</span>&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">    grantResults: <span class="type">IntArray</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)</span><br><span class="line">    PermissionManager.onRequestPermissionsResult(</span><br><span class="line">        <span class="keyword">this</span>,</span><br><span class="line">        requestCode,</span><br><span class="line">        permissions,</span><br><span class="line">        grantResults,</span><br><span class="line">        <span class="keyword">this</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPermissionsGranted</span><span class="params">(requestCode: <span class="type">Int</span>, perms: <span class="type">List</span>&lt;<span class="type">String</span>?&gt;)</span></span> &#123;</span><br><span class="line">    ToastUtil.showToast(<span class="keyword">this</span>, <span class="string">"授权成功"</span>)</span><br><span class="line">    afterPermission()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPermissionsDenied</span><span class="params">(requestCode: <span class="type">Int</span>, perms: <span class="type">List</span>&lt;<span class="type">String</span>?&gt;)</span></span> &#123;</span><br><span class="line">    ToastUtil.showToast(<span class="keyword">this</span>, <span class="string">"授权失败"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPermissionDeniedForever</span><span class="params">(requestCode: <span class="type">Int</span>, perms: <span class="type">List</span>&lt;<span class="type">String</span>?&gt;)</span></span> &#123;</span><br><span class="line">    showSettingsDialog()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4 当用户‘拒绝且不再询问’，引导去手机设置</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">showSettingsDialog</span><span class="params">()</span></span> &#123;</span><br><span class="line">    AlertDialog.Builder(<span class="keyword">this</span>)</span><br><span class="line">        .setTitle(<span class="string">"权限申请"</span>)</span><br><span class="line">        .setMessage(<span class="string">"已永久拒绝，需要去设置-&gt;权限设置打开"</span>)</span><br><span class="line">        .setPositiveButton(<span class="string">"前往设置"</span>) &#123; dialog, which -&gt;</span><br><span class="line">            dialog.dismiss()</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS)</span><br><span class="line">                .setData(Uri.fromParts(<span class="string">"package"</span>, packageName, <span class="literal">null</span>))</span><br><span class="line">            startActivityForResult(intent, REQUEST_CODE_FOR_PERMISSION_SETTINGS)</span><br><span class="line">        &#125;</span><br><span class="line">        .setNegativeButton(<span class="string">"取消"</span>) &#123; dialog, which -&gt;</span><br><span class="line">            dialog.dismiss()</span><br><span class="line">            ToastUtil.showToast(<span class="keyword">this</span>, <span class="string">"已取消授权..."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .setCancelable(<span class="literal">false</span>)</span><br><span class="line">        .create()</span><br><span class="line">        .show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5 检查手机设置后的权限申请结果</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (requestCode == REQUEST_CODE_FOR_PERMISSION_SETTINGS) &#123;</span><br><span class="line">        afterPermission()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="0x04-特别推荐-PermissionX"><a href="#0x04-特别推荐-PermissionX" class="headerlink" title="0x04 特别推荐 PermissionX"></a>0x04 特别推荐 <code>PermissionX</code></h4><p><a href="https://github.com/guolindev/PermissionX" target="_blank" rel="noopener">PermissionX</a></p>
<p><a href="https://blog.csdn.net/sinyu890807/category_10108528.html" target="_blank" rel="noopener">中文文档</a></p>
<p>PermissionX is an extension Android library that makes Android runtime permission request extremely easy. You can use it for basic permission request occasions or handle more complex conditions, like showing rationale dialog or go to app settings for allowance manually.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2022/09/08/Android%E4%BB%8E%E7%8E%B0%E6%9C%89%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%9A%AE%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/09/08/Android%E4%BB%8E%E7%8E%B0%E6%9C%89%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%9A%AE%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">Android从现有的项目创建一个皮应用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-08 21:09:31" itemprop="dateCreated datePublished" datetime="2022-09-08T21:09:31+08:00">2022-09-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-26 18:11:50" itemprop="dateModified" datetime="2022-11-26T18:11:50+08:00">2022-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Android从现有的项目创建一个皮应用"><a href="#Android从现有的项目创建一个皮应用" class="headerlink" title="Android从现有的项目创建一个皮应用"></a>Android从现有的项目创建一个皮应用</h2><h3 id="0x01-Copy一个新项目"><a href="#0x01-Copy一个新项目" class="headerlink" title="0x01 Copy一个新项目"></a>0x01 Copy一个新项目</h3><ol>
<li>clean原项目，然后直接Copy原项目所有文件，等待完成</li>
<li>根据新项目重命名新文件夹名称</li>
<li>删除原项目的 <code>.idea</code> <code>.git</code> <code>.gitlab</code> 等文件夹，<code>.gradle</code> 可以不删</li>
<li>用编辑器打开 <code>settings.gradle</code>，修改项目名称 <code>rootProject.name = &quot;xxx&quot;</code></li>
</ol>
<h3 id="0x02-重命名项目包名"><a href="#0x02-重命名项目包名" class="headerlink" title="0x02 重命名项目包名"></a>0x02 重命名项目包名</h3><p>这一步是要将包名从 <code>com.sample1.android</code> 重命名为 <code>com.sample2.android</code></p>
<ol>
<li>用AndroidStudio打开新项目，去掉 <code>Compat Middle Packages</code> 前面的勾</li>
<li>选择项目的 <code>sample1</code> 包名，<code>Shift + F6</code>重命名</li>
<li>一定选择 <code>Rename Package</code></li>
<li>等待完成，项目大时间就比较长</li>
<li>修改 <code>.aidl</code> 文件的包名路径和import的路径</li>
<li>修改根目录下的 <code>build.gradle</code> 的 <code>applicationId &quot;com.sample2.android&quot;</code>，并 <code>sync</code></li>
</ol>
<p>ps: 不清楚为啥Kotlin的扩展函数还需要重新手动导入</p>
<h3 id="0x03-推到代码库"><a href="#0x03-推到代码库" class="headerlink" title="0x03 推到代码库"></a>0x03 推到代码库</h3><p>到上面这一步，不出意外的话已经可以编译成功并且跑起来了。编译成功之后可以先推送本地项目到代码库。</p>
<p>远程代码库新建项目，获取新项目git地址，然后执行下面操作。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> existing_folder</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote add origin git://github.com/schacon/grit.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push -u origin master</span></span><br></pre></td></tr></table></figure>

<h3 id="0x04-后续"><a href="#0x04-后续" class="headerlink" title="0x04 后续"></a>0x04 后续</h3><p>下面就是修改名称，URL，替换功能啥的。</p>
<ul>
<li>Logo、名称、资源文件替换</li>
<li>H5协议替换</li>
<li>域名修改</li>
<li>第三方账号切换</li>
</ul>
<h3 id="0x05-审核相关"><a href="#0x05-审核相关" class="headerlink" title="0x05 审核相关"></a>0x05 审核相关</h3><p>现在应用市场对新应用的审核非常严格。为了过审，可能需要做很多相关的工作</p>
<ul>
<li>混淆，或者改文件名</li>
<li>资源混淆，或者资源改名</li>
<li>增加新功能</li>
<li>修改UI界面样式</li>
<li>做审核版功能</li>
</ul>
<h3 id="0x06-问题"><a href="#0x06-问题" class="headerlink" title="0x06 问题"></a>0x06 问题</h3><h4 id="0x0601-如果Shift-F6重命名时没有Rename-Package选项"><a href="#0x0601-如果Shift-F6重命名时没有Rename-Package选项" class="headerlink" title="0x0601 如果Shift + F6重命名时没有Rename Package选项"></a>0x0601 如果<code>Shift + F6</code>重命名时没有<code>Rename Package</code>选项</h4><p>如果<code>Shift + F6</code>重命名时没有<code>Rename Package</code>选项, 并且出现了以下提示，<br><code>Package &#39;example&#39; contains directories in libraries which cannot be renamed. Do you want to rename current directory or all directories in project?</code>，<br>这是因为依赖包中也存在example这个包名，导致无法直接重命名包名。解决的方案分两种：</p>
<p>方案1. 暂时先移除包含example包名的依赖包，等重命名之后重新添加到项目中<br>方案2. 只能新建package，然后将要rename的包拖动到新的package中，或者<code>F6</code>移动</p>
<p>PS：因为无法重命名，刚刚经历了手动移动十几个module的package包路径的痛苦历程。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2022/08/15/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-RoundImageView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/08/15/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-RoundImageView/" class="post-title-link" itemprop="url">RoundImageView圆角控件</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-15 23:38:52" itemprop="dateCreated datePublished" datetime="2022-08-15T23:38:52+08:00">2022-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-26 18:11:50" itemprop="dateModified" datetime="2022-11-26T18:11:50+08:00">2022-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="RoundImageView圆角控件"><a href="#RoundImageView圆角控件" class="headerlink" title="RoundImageView圆角控件"></a>RoundImageView圆角控件</h2><p>示例代码如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Path;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.<span class="keyword">annotation</span>.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.AppCompatImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoundImageView</span> <span class="title">extends</span> <span class="title">AppCompatImageView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> static <span class="keyword">final</span> String TAG = <span class="string">"RoundImageView"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> int radius = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RoundImageView(Context context) &#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RoundImageView(Context context, <span class="meta">@Nullable</span> AttributeSet attrs) &#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RoundImageView(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        setup(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> void setup(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.RoundImageView);</span><br><span class="line">            radius = a.getDimensionPixelSize(R.styleable.RoundImageView_riv_radius, <span class="number">0</span>);</span><br><span class="line">            Log.d(TAG, <span class="string">"RoundImageView: radius="</span> + radius);</span><br><span class="line">            a.recycle();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> void setRadius(int radius) &#123;</span><br><span class="line">        <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onDraw(Canvas canvas) &#123;</span><br><span class="line">        <span class="keyword">if</span> (radius &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            Path path = new Path();</span><br><span class="line">            path.addRoundRect(new RectF(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight()), radius, radius, Path.Direction.CW);</span><br><span class="line">            canvas.clipPath(path);<span class="comment">//设置可显示的区域，canvas四个角会被剪裁掉</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>attrs.xml</code> 文件中定义控件的圆角dp值属性:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">"RoundImageView"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">"riv_radius"</span> <span class="attr">format</span>=<span class="string">"dimension"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用示例</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.xx.ui.widget.RoundImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/image_view"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"60dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:riv_radius</span>=<span class="string">"8dp"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2022/08/15/Gradle%E7%9A%84%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/08/15/Gradle%E7%9A%84%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">Gradle的配置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-15 19:16:31" itemprop="dateCreated datePublished" datetime="2022-08-15T19:16:31+08:00">2022-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-26 18:11:50" itemprop="dateModified" datetime="2022-11-26T18:11:50+08:00">2022-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Gradle的配置"><a href="#Gradle的配置" class="headerlink" title="Gradle的配置"></a>Gradle的配置</h2><p><a href="https://www.cnblogs.com/baiqiantao/p/6890674.html" target="_blank" rel="noopener">原文地址：https://www.cnblogs.com/baiqiantao/p/6890674.html</a></p>
<p><a href="https://docs.gradle.org/current/userguide/installation.html" target="_blank" rel="noopener">Installing Gradle: https://docs.gradle.org/current/userguide/installation.html</a></p>
<ul>
<li>gradlew 和 gradlew.bat：封装 gradle 的脚本，目的是为了更方便的使用 gradle</li>
<li>环境变量 <code>GRADLE_HOME</code>：仅仅是为了可以在任意目录中执行 gradle 命令，没有特殊的意义</li>
<li>环境变量 <code>GRADLE_USER_HOME</code>：控制在命令行中执行 gradlew 命令时，gradle 下载的目录</li>
<li>IDEA 的 <code>Gradle user home</code>：控制在 IDEA 点击按钮执行各项 Task 等功能时，gradle 下载的目录</li>
<li>IDEA 的 <code>User from gradle</code>：控制在 IDEA 点击按钮执行各项 Task 等功能时，使用的 gradle 的版本</li>
</ul>
<h3 id="环境变量-GRADLE-HOME"><a href="#环境变量-GRADLE-HOME" class="headerlink" title="环境变量 GRADLE_HOME"></a>环境变量 GRADLE_HOME</h3><p>设置环境变量 GRADLE_HOME 的目的，仅仅是为了方便在 Path 中指定 gradle 的位置。<br>GRADLE_HOME：<a href="file:///D:/_dev/gradle/GRADLE_HOME/gradle-6.7/">D:_dev\gradle_GRADLE_HOME\gradle-6.7</a><br>Path：<a href="file:///D:/_dev/gradle/GRADLE_HOME/gradle-6.7/bin/">%GRADLE_HOME%\bin</a><br>将 gradle 添加到 Path 的目的是为了，可以在任意目录中执行 gradle 命令。<br>实际上，完全没必要设置环境变量 GRADLE_HOME，Do we really need GRADLE_HOME?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gradle -v           <span class="comment"># 查看版本</span></span><br><span class="line">gradle --<span class="built_in">help</span>       <span class="comment"># 查看命令使用帮助</span></span><br><span class="line"></span><br><span class="line">λ <span class="built_in">where</span> gradle      <span class="comment"># 查看 gradle 命令位置</span></span><br><span class="line">D:\_dev\gradle\GRADLE_HOME\gradle-6.7\bin\gradle</span><br><span class="line">D:\_dev\gradle\GRADLE_HOME\gradle-6.7\bin\gradle.bat</span><br></pre></td></tr></table></figure>

<h3 id="gradlew-是干嘛的"><a href="#gradlew-是干嘛的" class="headerlink" title="gradlew 是干嘛的"></a>gradlew 是干嘛的</h3><p>其实 <code>gradlew</code> 只是一个 gradle 的封装(wrapper)，gradlew = gradle wrapper，因为在项目根目录有 <code>gradlew</code> 和 <code>gradlew.bat</code> 这两个可执行文件，所以 <strong>能且仅能</strong> 在项目根目录中执行 <code>gradlew</code> 命令。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">D:\_dev\_code\<span class="keyword">as</span>\Test&gt; gradlew -v       # 查看版本</span><br><span class="line">D:\_dev\_code\<span class="keyword">as</span>\Test&gt; gradlew --help   # 查看命令使用帮助</span><br><span class="line"></span><br><span class="line">D:\_dev\_code\<span class="keyword">as</span>\Test&gt; <span class="keyword">where</span> gradlew    # 查看 gradlew 命令位置</span><br><span class="line">D:\_dev\_code\<span class="keyword">as</span>\Test\gradlew</span><br><span class="line">D:\_dev\_code\<span class="keyword">as</span>\Test\gradlew.bat</span><br></pre></td></tr></table></figure>

<p>这两个文件头部的注释也说明了他们的作用：</p>
<ul>
<li>gradlew：Gradle start up script for UN*X</li>
<li>gradlew.bat：Gradle startup script for Windows</li>
</ul>
<p>之所以添加这个 <code>gradlew</code> 脚本，是为了：</p>
<p>统一项目所使用的 gradle 版本，避免不同开发人员使用不同的 gradle 版本导致的兼容性问题<br>可以把 <code>gradle-wrapper.properties</code> 里面的下载 gradle 的地址切换到公司的公共空间上，以加快下载速度</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">distributionUrl=https\:<span class="comment">//services.gradle.org/distributions/gradle-6.5-all.zip</span></span><br></pre></td></tr></table></figure>

<h3 id="环境变量-GRADLE-USER-HOME"><a href="#环境变量-GRADLE-USER-HOME" class="headerlink" title="环境变量 GRADLE_USER_HOME"></a>环境变量 GRADLE_USER_HOME</h3><p>设置环境变量 <code>GRADLE_USER_HOME</code> 的目的，是为了自定义下载 <code>gradle</code> 时的本地存储路径。<br>在命令行中执行 <code>gradlew</code> 命令(注意不是 gradle 命令)时，会将对应版本的 <code>gradle</code> 下载到此目录中。<br>下载 gradle 时，下载地址及版本由项目中的 /gradle/wrapper/gradle-wrapper.properties 决定。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#Mon Nov 16 00:55:48 CST 2020</span><br><span class="line">distributionBase=GRADLE_USER_HOME</span><br><span class="line">distributionPath=wrapper/dists</span><br><span class="line">zipStoreBase=GRADLE_USER_HOME</span><br><span class="line">zipStorePath=wrapper/dists</span><br><span class="line">distributionUrl=https\:<span class="comment">//services.gradle.org/distributions/gradle-6.5-all.zip</span></span><br></pre></td></tr></table></figure>

<h3 id="IDEA-的-Gradle-user-home"><a href="#IDEA-的-Gradle-user-home" class="headerlink" title="IDEA 的 Gradle user home"></a>IDEA 的 Gradle user home</h3><p>在 IDEA 的 <code>File | Settings | Build, Execution, Deployment | Build Tools | Gradle</code> 中，有一个 <code>Gradle user home</code> 的配置，其作用和环境变量 <code>GRADLE_USER_HOME</code> 类似，只不过该配置只是给 IDEA 使用的。譬如点击 gradle 窗口的各种 Task 按钮执行各项 Task 功能时。</p>
<p>注意：仅 IDEA 中的各种图形化操作会使用此配置，在 IDEA 的 Terminal 中执行 gradlew 命令时，使用的依旧是环境变量 <code>GRADLE_USER_HOME</code>。</p>
<h3 id="IDEA-的-User-from-gradle"><a href="#IDEA-的-User-from-gradle" class="headerlink" title="IDEA 的 User from gradle"></a>IDEA 的 User from gradle</h3><p>在 IDEA 的 <code>File | Settings | Build, Execution, Deployment | Build Tools | Gradle</code> 中，有一个 <code>User from gradle</code> 的配置，它也是仅提供给 IDEA 使用的(对 gradlew 无效)。</p>
<p>其作用是，指定当前工程中 IDEA 所使用的 gradle 版本：</p>
<p>当勾选 <code>gradle-wrapper.properties</code> 时，使用 <code>gradle-wrapper.properties</code> 中指定的 gradle 版本。<br>为了防止和在 Terminal 中执行 gradlew 命令时使用的 gradle 版本不同，建议勾选此配置(也是默认配置)。<br>当勾选 Specified location 时，使用指定目录下的 gradle 版本。<br>如果 gradle 下载很慢，就可以勾选此配置，以便使用指定本地下载好的 gradle 版本。</p>
<blockquote>
<p>不管在 IDEA 中怎么配置，在 Terminal 中执行 gradlew 命令时，所使用的 gradle 版本都是由 <code>gradle-wrapper.properties</code> 决定的，并且下载路径也都是由环境变量 <code>GRADLE_USER_HOME</code> 决定的。</p>
</blockquote>
<h2 id="Gradle-依赖的-JDK-配置"><a href="#Gradle-依赖的-JDK-配置" class="headerlink" title="Gradle 依赖的 JDK 配置"></a>Gradle 依赖的 JDK 配置</h2><p>这里的 JDK 指的是执行 Gradle 命令依赖的 JDK，并非 AndroidStudio 工程依赖的 JDK。</p>
<p>通过 <code>File | Settings | Build, Execution, Deployment | Build Tools | Gradle</code> 设置的 JDK，是在运行 IDEA 图形化按钮时使用的。<br>通过 <code>gradle.properties</code> 设置的 JDK，是在 Terminal 中执行 gradlew 命令时使用的。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.java.home=C\:<span class="regexp">/_dev/</span>Android<span class="regexp">/Android Studio/</span>jre</span><br></pre></td></tr></table></figure>

<p>注意：AGP 从 7.0.0-alpha02 版本起，需要使用 Java 11</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://denchopen.github.io/blog/2022/06/29/%E7%94%A8Android%E8%87%AA%E5%B8%A6%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="Dench">
      <meta itemprop="description" content="Love & Peace">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/06/29/%E7%94%A8Android%E8%87%AA%E5%B8%A6%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5/" class="post-title-link" itemprop="url">用Android自带浏览器打开网页</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-29 21:13:46" itemprop="dateCreated datePublished" datetime="2022-06-29T21:13:46+08:00">2022-06-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-26 18:11:50" itemprop="dateModified" datetime="2022-11-26T18:11:50+08:00">2022-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="启动android默认浏览器"><a href="#启动android默认浏览器" class="headerlink" title="启动android默认浏览器"></a>启动android默认浏览器</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> intent = Intent()</span><br><span class="line">intent.<span class="keyword">data</span> = Uri.parse(url)</span><br><span class="line">intent.action = Intent.ACTION_VIEW</span><br><span class="line">intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK</span><br><span class="line">context.startActivity(intent)</span><br></pre></td></tr></table></figure>

<h2 id="启动指定浏览器打开（不推荐）"><a href="#启动指定浏览器打开（不推荐）" class="headerlink" title="启动指定浏览器打开（不推荐）"></a>启动指定浏览器打开（不推荐）</h2><p><strong>警告：爱加密加固之后的包，会把这个异常给吃掉，导致无法跳转，也无反应。</strong></p>
<p>这种方式需要处理手机中不存在指定浏览器的情况</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> intent = Intent()</span><br><span class="line">    intent.<span class="keyword">data</span> = Uri.parse(targetUrl)</span><br><span class="line">    intent.action = Intent.ACTION_VIEW</span><br><span class="line">    intent.setClassName(</span><br><span class="line">        <span class="string">"com.android.browser"</span>,</span><br><span class="line">        <span class="string">"com.android.browser.BrowserActivity"</span></span><br><span class="line">    ) </span><br><span class="line">    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK</span><br><span class="line">    context.startActivity(intent)</span><br><span class="line">&#125; <span class="keyword">catch</span> (e: Exception) &#123;</span><br><span class="line">    e.printStackTrace()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// android.content.ActivityNotFoundException: Unable to find explicit activity class &#123;com.android.browser/com.android.browser.BrowserActivity&#125;; have you declared this activity in your AndroidManifest.xml?</span></span><br><span class="line">    <span class="keyword">val</span> intent = Intent()</span><br><span class="line">    intent.<span class="keyword">data</span> = Uri.parse(url)</span><br><span class="line">    intent.action = Intent.ACTION_VIEW</span><br><span class="line">    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK</span><br><span class="line">    context.startActivity(intent)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于华为鸿蒙系统已经没有Android默认的浏览器，所以此处必须要有异常处理，或者提前处理手机中不存在指定浏览器的情况。</p>
<p>市场上常用浏览器的包名和类名@20220630</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">华为:</span> <span class="string">"com.huawei.browser/com.huawei.browser.BrowserMainActivity"</span></span><br><span class="line"><span class="attr">Vivo:</span> <span class="string">"com.vivo.browser/com.vivo.browser.MainActivity"</span></span><br><span class="line"><span class="string">小米:</span> <span class="string">"name=com.android.browser/com.android.browser.BrowserActivity"</span></span><br><span class="line"><span class="string">uc浏览器:</span> <span class="string">"com.uc.browser"</span><span class="string">,</span> <span class="string">"com.uc.browser.ActivityUpdate"</span></span><br><span class="line"><span class="attr">opera:</span> <span class="string">"com.opera.mini.android"</span><span class="string">,</span> <span class="string">"com.opera.mini.android.Browser"</span></span><br><span class="line"><span class="string">qq浏览器:</span> <span class="string">"com.tencent.mtt"</span><span class="string">,</span> <span class="string">"com.tencent.mtt.MainActivity"</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/blog/">1</a><span class="page-number current">2</span><a class="page-number" href="/blog/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/14/">14</a><a class="extend next" rel="next" href="/blog/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dench"
      src="/blog/images/avatar.png">
  <p class="site-author-name" itemprop="name">Dench</p>
  <div class="site-description" itemprop="description">Love & Peace</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">80</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DenchOpen</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
